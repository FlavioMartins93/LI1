<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Main</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><script src="haddock-util.js" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
window.onload = function () {pageLoad();setSynopsis("mini_Main.html");};
//]]>
</script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption empty">&nbsp;</p></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>Safe</td></tr></table><p class="caption">Main</p></div><div id="description"><p class="caption">Description</p><div class="doc"><p>O objectivo desta tarefa &#233;,  dada uma descri&#231;&#227;o do estado do jogo, determinar o efeito da
passagem de um instante de tempo nesse estado. O estado do jogo ser&#225; representado no
mesmo formato usado na Tarefa 2 da primeira fase do projecto.
Cada jogo tem uma dura&#231;&#227;o fixa. Para for&#231;ar os jogadores a efectuar ac&#231;&#245;es, num mapa de
dimens&#227;o n, quando faltarem (n-2)^2 instantes de tempo o mapa come&#231;a a fechar-se com
blocos de pedra num efeito de espiral que come&#231;a na posi&#231;&#227;o 1 1.</p><p>Para realizar esta Tarefa decidimos dividir a tarefa em 2 partes, simula&#227;o da explos&#227;o das bombas e simila&#231;&#227;o do efeito espiral.</p><p>Para simular o efeito da explos&#227;o de bombas criamos uma fun&#231;&#227;o que 
simula o efeito da explos&#227;o de bombas, que explode nas quatro direc&#231;&#245;es (<code>D</code>,<code>U</code>,<code>R</code>,<code>L</code>)
com um dado raio e que ir&#225; ser travada por qualquer parede, powerUP
 ou tijolo(removendo o tijolo e revelando, caso exista, o powerUP escondido pelo menos),
al&#233;m disto, nas posi&#231;&#245;es onde se d&#225; a explos&#227;o ir&#225; eliminar todos os jogadores que estejam nessa posi&#231;&#227;o e, 
caso exista, ir&#225; colocar o tempo para explodir
da bomba dessa possi&#231;&#227;o a 1(de modo a explodir no instante seguinte).
Para simular o efeito espiral de fechar o mapa criamos uma fun&#231;&#227;o que, 
recebendo o mapa e o tempo de jogo, coloca paredes de forma espiral
de modo a fechar o mapa e remove tudo que exista na posi&#231;&#227;o que se deve fechar num dado instante de tempo.</p></div></div><div id="synopsis"><p id="control.syn" class="caption expander" onclick="toggleSection('syn')">Synopsis</p><ul id="section.syn" class="hide" onclick="toggleSection('syn')"><li class="src short"><span class="keyword">type</span> <a href="#t:Mapa">Mapa</a> = [String]</li><li class="src short"><span class="keyword">type</span> <a href="#t:Grelha">Grelha</a> = [String]</li><li class="src short"><span class="keyword">type</span> <a href="#t:Elementos">Elementos</a> = [String]</li><li class="src short"><span class="keyword">type</span> <a href="#t:PUbomba">PUbomba</a> = String</li><li class="src short"><span class="keyword">type</span> <a href="#t:PUflame">PUflame</a> = String</li><li class="src short"><span class="keyword">type</span> <a href="#t:Bomba">Bomba</a> = String</li><li class="src short"><span class="keyword">type</span> <a href="#t:Raio">Raio</a> = Int</li><li class="src short"><span class="keyword">type</span> <a href="#t:Jogador">Jogador</a> = String</li><li class="src short"><span class="keyword">type</span> <a href="#t:Linha">Linha</a> = Int</li><li class="src short"><span class="keyword">type</span> <a href="#t:Coluna">Coluna</a> = Int</li><li class="src short"><span class="keyword">type</span> <a href="#t:Coordenada">Coordenada</a> = (<a href="Main.html#t:Coluna">Coluna</a>, <a href="Main.html#t:Linha">Linha</a>)</li><li class="src short"><span class="keyword">type</span> <a href="#t:Tempo">Tempo</a> = Int</li><li class="src short"><span class="keyword">type</span> <a href="#t:Dimensao">Dimensao</a> = Int</li><li class="src short"><a href="#v:avanca">avanca</a> :: [String] -&gt; Int -&gt; [String]</li><li class="src short"><a href="#v:main">main</a> :: IO ()</li><li class="src short"><a href="#v:grelha">grelha</a> :: <a href="Main.html#t:Mapa">Mapa</a> -&gt; <a href="Main.html#t:Grelha">Grelha</a></li><li class="src short"><a href="#v:bombas">bombas</a> :: <a href="Main.html#t:Mapa">Mapa</a> -&gt; [<a href="Main.html#t:PUbomba">PUbomba</a>]</li><li class="src short"><a href="#v:flames">flames</a> :: <a href="Main.html#t:Mapa">Mapa</a> -&gt; [<a href="Main.html#t:PUflame">PUflame</a>]</li><li class="src short"><a href="#v:bombacol">bombacol</a> :: <a href="Main.html#t:Mapa">Mapa</a> -&gt; [<a href="Main.html#t:Bomba">Bomba</a>]</li><li class="src short"><a href="#v:jogadores">jogadores</a> :: <a href="Main.html#t:Mapa">Mapa</a> -&gt; [<a href="Main.html#t:Jogador">Jogador</a>]</li><li class="src short"><a href="#v:jogador">jogador</a> :: Char -&gt; [<a href="Main.html#t:Jogador">Jogador</a>] -&gt; <a href="Main.html#t:Jogador">Jogador</a></li><li class="src short"><a href="#v:tupler">tupler</a> :: String -&gt; <a href="Main.html#t:Coordenada">Coordenada</a></li><li class="src short"><a href="#v:tuplesdados">tuplesdados</a> :: [String] -&gt; [<a href="Main.html#t:Coordenada">Coordenada</a>]</li><li class="src short"><a href="#v:verposigrelha">verposigrelha</a> :: <a href="Main.html#t:Grelha">Grelha</a> -&gt; <a href="Main.html#t:Coordenada">Coordenada</a> -&gt; <a href="Main.html#t:Coordenada">Coordenada</a> -&gt; Char</li><li class="src short"><a href="#v:bombasaexp">bombasaexp</a> :: [<a href="Main.html#t:Bomba">Bomba</a>] -&gt; [<a href="Main.html#t:Bomba">Bomba</a>]</li><li class="src short"><a href="#v:decbombas">decbombas</a> :: [<a href="Main.html#t:Bomba">Bomba</a>] -&gt; [<a href="Main.html#t:Bomba">Bomba</a>]</li><li class="src short"><a href="#v:expbombas">expbombas</a> :: [<a href="Main.html#t:Bomba">Bomba</a>] -&gt; <a href="Main.html#t:Mapa">Mapa</a> -&gt; <a href="Main.html#t:Mapa">Mapa</a></li><li class="src short"><a href="#v:expbomba">expbomba</a> :: <a href="Main.html#t:Bomba">Bomba</a> -&gt; <a href="Main.html#t:Mapa">Mapa</a> -&gt; <a href="Main.html#t:Mapa">Mapa</a></li><li class="src short"><a href="#v:removerjogpos">removerjogpos</a> :: <a href="Main.html#t:Coordenada">Coordenada</a> -&gt; [<a href="Main.html#t:Jogador">Jogador</a>] -&gt; [<a href="Main.html#t:Jogador">Jogador</a>]</li><li class="src short"><a href="#v:explodir">explodir</a> :: <a href="Main.html#t:Coordenada">Coordenada</a> -&gt; <a href="Main.html#t:Coordenada">Coordenada</a> -&gt; <a href="Main.html#t:Raio">Raio</a> -&gt; <a href="Main.html#t:Mapa">Mapa</a> -&gt; <a href="Main.html#t:Mapa">Mapa</a></li><li class="src short"><a href="#v:removertijolo">removertijolo</a> :: <a href="Main.html#t:Coordenada">Coordenada</a> -&gt; <a href="Main.html#t:Mapa">Mapa</a> -&gt; <a href="Main.html#t:Mapa">Mapa</a></li><li class="src short"><a href="#v:tempobombaum">tempobombaum</a> :: <a href="Main.html#t:Coordenada">Coordenada</a> -&gt; [<a href="Main.html#t:Bomba">Bomba</a>] -&gt; [<a href="Main.html#t:Bomba">Bomba</a>]</li><li class="src short"><a href="#v:eliminarjogatingidos">eliminarjogatingidos</a> :: <a href="Main.html#t:Coordenada">Coordenada</a> -&gt; [<a href="Main.html#t:Jogador">Jogador</a>] -&gt; [<a href="Main.html#t:Jogador">Jogador</a>]</li><li class="src short"><a href="#v:fecharmapa">fecharmapa</a> :: Int -&gt; <a href="Main.html#t:Mapa">Mapa</a> -&gt; <a href="Main.html#t:Mapa">Mapa</a></li><li class="src short"><a href="#v:removertudopos">removertudopos</a> :: <a href="Main.html#t:Coordenada">Coordenada</a> -&gt; <a href="Main.html#t:Elementos">Elementos</a> -&gt; <a href="Main.html#t:Elementos">Elementos</a></li><li class="src short"><a href="#v:colocarparede">colocarparede</a> :: <a href="Main.html#t:Coordenada">Coordenada</a> -&gt; <a href="Main.html#t:Grelha">Grelha</a> -&gt; <a href="Main.html#t:Grelha">Grelha</a></li><li class="src short"><a href="#v:posicaoafechar">posicaoafechar</a> :: Char -&gt; <a href="Main.html#t:Dimensao">Dimensao</a> -&gt; <a href="Main.html#t:Coluna">Coluna</a> -&gt; <a href="Main.html#t:Linha">Linha</a> -&gt; <a href="Main.html#t:Tempo">Tempo</a> -&gt; <a href="Main.html#t:Coordenada">Coordenada</a></li></ul></div><div id="interface"><h1>Documentation</h1><div class="top"><p class="src"><span class="keyword">type</span> <a name="t:Mapa" class="def">Mapa</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">&nbsp;= [String]</td><td class="doc"><p>inclui todos os elementos</p></td></tr></table></div></div><div class="top"><p class="src"><span class="keyword">type</span> <a name="t:Grelha" class="def">Grelha</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">&nbsp;= [String]</td><td class="doc"><p>apenas a grelha de jogo (tijolos e paredes) (sem powerups,bombas e jogadores)</p></td></tr></table></div></div><div class="top"><p class="src"><span class="keyword">type</span> <a name="t:Elementos" class="def">Elementos</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">&nbsp;= [String]</td><td class="doc"><p>inclui todo a informa&#231;ao menos a grelha</p></td></tr></table></div></div><div class="top"><p class="src"><span class="keyword">type</span> <a name="t:PUbomba" class="def">PUbomba</a> = String</p></div><div class="top"><p class="src"><span class="keyword">type</span> <a name="t:PUflame" class="def">PUflame</a> = String</p></div><div class="top"><p class="src"><span class="keyword">type</span> <a name="t:Bomba" class="def">Bomba</a> = String</p></div><div class="top"><p class="src"><span class="keyword">type</span> <a name="t:Raio" class="def">Raio</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">&nbsp;= Int</td><td class="doc"><p>Raio de ac&#231;&#227;o duma bomba</p></td></tr></table></div></div><div class="top"><p class="src"><span class="keyword">type</span> <a name="t:Jogador" class="def">Jogador</a> = String</p></div><div class="top"><p class="src"><span class="keyword">type</span> <a name="t:Linha" class="def">Linha</a> = Int</p></div><div class="top"><p class="src"><span class="keyword">type</span> <a name="t:Coluna" class="def">Coluna</a> = Int</p></div><div class="top"><p class="src"><span class="keyword">type</span> <a name="t:Coordenada" class="def">Coordenada</a> = (<a href="Main.html#t:Coluna">Coluna</a>, <a href="Main.html#t:Linha">Linha</a>)</p></div><div class="top"><p class="src"><span class="keyword">type</span> <a name="t:Tempo" class="def">Tempo</a> = Int</p></div><div class="top"><p class="src"><span class="keyword">type</span> <a name="t:Dimensao" class="def">Dimensao</a> = Int</p></div><div class="top"><p class="src"><a name="v:avanca" class="def">avanca</a> :: [String] -&gt; Int -&gt; [String]</p><div class="doc"><p>Fun&#231;&#227;o principal desta Tarefa, recebe como input o mapa do jogo e o tempo que falta para acabar o jogo e devolve o mapa com o efeito(caso exista) da passagem do tempo</p></div></div><div class="top"><p class="src"><a name="v:main" class="def">main</a> :: IO ()</p></div><div class="top"><p class="src"><a name="v:grelha" class="def">grelha</a> :: <a href="Main.html#t:Mapa">Mapa</a> -&gt; <a href="Main.html#t:Grelha">Grelha</a></p><div class="doc"><p>Fun&#231;&#227;o que recebe o input e devolve apenas a grelha de jogo </p></div></div><div class="top"><p class="src"><a name="v:bombas" class="def">bombas</a> :: <a href="Main.html#t:Mapa">Mapa</a> -&gt; [<a href="Main.html#t:PUbomba">PUbomba</a>]</p><div class="doc"><p>Fun&#231;&#227;o que recebe o input e devolve a lista de bombas </p></div></div><div class="top"><p class="src"><a name="v:flames" class="def">flames</a> :: <a href="Main.html#t:Mapa">Mapa</a> -&gt; [<a href="Main.html#t:PUflame">PUflame</a>]</p><div class="doc"><p>Fun&#231;&#227;o que recebe o input e devolve a lista de flames </p></div></div><div class="top"><p class="src"><a name="v:bombacol" class="def">bombacol</a> :: <a href="Main.html#t:Mapa">Mapa</a> -&gt; [<a href="Main.html#t:Bomba">Bomba</a>]</p><div class="doc"><p>Fun&#231;&#227;o que recebe o input e devolve a lista das bombas colocadas </p></div></div><div class="top"><p class="src"><a name="v:jogadores" class="def">jogadores</a> :: <a href="Main.html#t:Mapa">Mapa</a> -&gt; [<a href="Main.html#t:Jogador">Jogador</a>]</p><div class="doc"><p>Fun&#231;&#227;o que recebe o input e devolve a lista jogadores </p></div></div><div class="top"><p class="src"><a name="v:jogador" class="def">jogador</a> :: Char -&gt; [<a href="Main.html#t:Jogador">Jogador</a>] -&gt; <a href="Main.html#t:Jogador">Jogador</a></p><div class="doc"><p>Fun&#231;&#227;o que pega na lista de jogadores e devolve apenas um jogador </p></div></div><div class="top"><p class="src"><a name="v:tupler" class="def">tupler</a> :: String -&gt; <a href="Main.html#t:Coordenada">Coordenada</a></p><div class="doc"><p>Fun&#231;&#227;o para adquirir a posicao no mapa de um PowerUP, jogador ou um bomba colocada </p></div></div><div class="top"><p class="src"><a name="v:tuplesdados" class="def">tuplesdados</a> :: [String] -&gt; [<a href="Main.html#t:Coordenada">Coordenada</a>]</p><div class="doc"><p>Fun&#231;&#227;o que utilizamos para transformar a lista de bombas ou flames na lista das suas coordenadas </p></div></div><div class="top"><p class="src"><a name="v:verposigrelha" class="def">verposigrelha</a> :: <a href="Main.html#t:Grelha">Grelha</a> -&gt; <a href="Main.html#t:Coordenada">Coordenada</a> -&gt; <a href="Main.html#t:Coordenada">Coordenada</a> -&gt; Char</p><div class="doc"><p>Fun&#231;&#227;o que verifica se uma determinada posicao da grelha esta ocupada por alguma parede ou tijolo </p></div></div><div class="top"><p class="src"><a name="v:bombasaexp" class="def">bombasaexp</a> :: [<a href="Main.html#t:Bomba">Bomba</a>] -&gt; [<a href="Main.html#t:Bomba">Bomba</a>]</p><div class="doc"><p>Fun&#231;&#227;o que seleciona as bombas que ir&#227;o explodir no instante de tempo actual </p></div></div><div class="top"><p class="src"><a name="v:decbombas" class="def">decbombas</a> :: [<a href="Main.html#t:Bomba">Bomba</a>] -&gt; [<a href="Main.html#t:Bomba">Bomba</a>]</p><div class="doc"><p>Fun&#231;&#227;o que remove bombas que ir&#227;o explodir neste instante do estado actual e reduz 1 instante ao tempo em falta para estas explodirem </p></div></div><div class="top"><p class="src"><a name="v:expbombas" class="def">expbombas</a> :: [<a href="Main.html#t:Bomba">Bomba</a>] -&gt; <a href="Main.html#t:Mapa">Mapa</a> -&gt; <a href="Main.html#t:Mapa">Mapa</a></p><div class="doc"><p>Fun&#231;&#227;o que explode as bombas </p></div></div><div class="top"><p class="src"><a name="v:expbomba" class="def">expbomba</a> :: <a href="Main.html#t:Bomba">Bomba</a> -&gt; <a href="Main.html#t:Mapa">Mapa</a> -&gt; <a href="Main.html#t:Mapa">Mapa</a></p><div class="doc"><p>Fun&#231;&#227;o auxiliar de expbombas que explode cada bomba </p></div></div><div class="top"><p class="src"><a name="v:removerjogpos" class="def">removerjogpos</a> :: <a href="Main.html#t:Coordenada">Coordenada</a> -&gt; [<a href="Main.html#t:Jogador">Jogador</a>] -&gt; [<a href="Main.html#t:Jogador">Jogador</a>]</p><div class="doc"><p>Fun&#231;&#227;o que remove jogador que esteja na mesma posi&#231;&#227;o que uma bomba a explodir </p></div></div><div class="top"><p class="src"><a name="v:explodir" class="def">explodir</a> :: <a href="Main.html#t:Coordenada">Coordenada</a> -&gt; <a href="Main.html#t:Coordenada">Coordenada</a> -&gt; <a href="Main.html#t:Raio">Raio</a> -&gt; <a href="Main.html#t:Mapa">Mapa</a> -&gt; <a href="Main.html#t:Mapa">Mapa</a></p><div class="doc"><p>Fun&#231;&#227;o que produz o efeito das chamas ao explodir uma bomba para um direc&#231;&#227;o </p></div></div><div class="top"><p class="src"><a name="v:removertijolo" class="def">removertijolo</a> :: <a href="Main.html#t:Coordenada">Coordenada</a> -&gt; <a href="Main.html#t:Mapa">Mapa</a> -&gt; <a href="Main.html#t:Mapa">Mapa</a></p><div class="doc"><p>Fun&#231;&#227;o que remove um tijolo do mapa </p></div></div><div class="top"><p class="src"><a name="v:tempobombaum" class="def">tempobombaum</a> :: <a href="Main.html#t:Coordenada">Coordenada</a> -&gt; [<a href="Main.html#t:Bomba">Bomba</a>] -&gt; [<a href="Main.html#t:Bomba">Bomba</a>]</p><div class="doc"><p>Fun&#231;&#227;o que passa o tempo que falta para uma bomba explodir directamente para 1 </p></div></div><div class="top"><p class="src"><a name="v:eliminarjogatingidos" class="def">eliminarjogatingidos</a> :: <a href="Main.html#t:Coordenada">Coordenada</a> -&gt; [<a href="Main.html#t:Jogador">Jogador</a>] -&gt; [<a href="Main.html#t:Jogador">Jogador</a>]</p><div class="doc"><p>Fun&#231;&#227;o que elimina os jogadores que est&#227;o numa determinada posi&#231;&#227;o </p></div></div><div class="top"><p class="src"><a name="v:fecharmapa" class="def">fecharmapa</a> :: Int -&gt; <a href="Main.html#t:Mapa">Mapa</a> -&gt; <a href="Main.html#t:Mapa">Mapa</a></p><div class="doc"><p>Fun&#231;&#227;o que coloca uma parede numa posi&#231;&#227;o, eliminando todos os seus elementos, com base no tempo de forma espiral </p></div></div><div class="top"><p class="src"><a name="v:removertudopos" class="def">removertudopos</a> :: <a href="Main.html#t:Coordenada">Coordenada</a> -&gt; <a href="Main.html#t:Elementos">Elementos</a> -&gt; <a href="Main.html#t:Elementos">Elementos</a></p><div class="doc"><p>Fun&#231;&#227;o que remove os elementos que est&#227;o numa determinada posi&#231;&#227;o </p></div></div><div class="top"><p class="src"><a name="v:colocarparede" class="def">colocarparede</a> :: <a href="Main.html#t:Coordenada">Coordenada</a> -&gt; <a href="Main.html#t:Grelha">Grelha</a> -&gt; <a href="Main.html#t:Grelha">Grelha</a></p><div class="doc"><p>Fun&#231;&#227;o que, na grelha de jogo, coloca uma parede numa dada posi&#231;&#227;o</p></div></div><div class="top"><p class="src"><a name="v:posicaoafechar" class="def">posicaoafechar</a> :: Char -&gt; <a href="Main.html#t:Dimensao">Dimensao</a> -&gt; <a href="Main.html#t:Coluna">Coluna</a> -&gt; <a href="Main.html#t:Linha">Linha</a> -&gt; <a href="Main.html#t:Tempo">Tempo</a> -&gt; <a href="Main.html#t:Coordenada">Coordenada</a></p><div class="doc"><p>Fun&#231;&#227;o que, dada a grelha de jogo e o tempo, indica qual posi&#231;&#227;o se deve fechar nesse instante </p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.16.1</p></div></body></html>